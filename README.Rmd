---
title: CGMprocessing

output: md_document
---
<!-- README.md is generated from README.Rmd. Please edit that file -->
<!-- badges: start -->
<!-- badges: end -->

The goal of CGMprocessing is to provide functions for preparing, cleaning and analyzing Continuous Glucose Monitoring (CGM) data for clinical diabetes studies. Glycemic variables and definitions are inline with the International Consensus on Use of Continuous Glucose Monitoring: [Danne 2017](https://care.diabetesjournals.org/content/40/12/1631). This package also includes a specific function for use in the context of diabetes exercise studies, which splits up CGM into specific time periods post-exercise. Specific outputs inline with exercise recommendations in type 1 diabetes: [Riddell 2017](https://pubmed.ncbi.nlm.nih.gov/28126459/).

This code was developed based off work by [T. Vigers](https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0216851)

This README is written as a tutorial for CGM analysis, including in the context of exercise. This an an update and more in depth explanation of the general pipeline that was developed and used in publishing a [PhD Thesis](https://www.proquest.com/openview/78089a4b4d1696754e7d2ae2b3e2e922/1?pq-origsite=gscholar&cbl=51922&diss=y) and [peer reviewed  research](https://academic.oup.com/jes/article/5/10/bvab127/6323320)

### Functions 
See parameters for explanations of the arguments per each function: 

- **cleanCGM** [Jump to cleanCGM](#cleancgm)

- **exercise_split** [Jump to exercise_split](#exercise_split)

- **analyseCGM** [Jump to analyseCGM output](#analysecgm)

### Example File Structures
- **/data-raw**: raw data from sensor
- **/data-clean**: data ran through cleanCGM() function or own cleaning pipeline to be inline with the format of a cleanCGM() output
- **/CGMupload**: Folder for output csv of glycemic metrics generated from analysedCGM() function  
- **/exerciseoutput**: Folder for the split exercise files generated by exercise_split()

‚ùó**Important**: This package is optimized for raw Dexcom or Libre CGM data. Raw CGM files usually have an ID number within the filename. If this is the case leave the filename as is. If raw files don't have this then edit the filenames so they are uniquely identified with the patients ID number. If you are using already coalesced data from another study  ie. [JAEB](https://public.jaeb.org/datasets/diabetes) then ID will already be a variable within the data structure, because it is a pre-processed data file from another study then leave file name as is. If you data is coalesced then the file looping is redundant in the cleanCGM function and will the cleaned version of the coalesced file. However ensure you separate out each ID type in for eg. R list of dataframes for when you run either **exercise_split** or **analyseCGM**. If you are working with JAEB, other pre-processed data, or other CGM device types ensure you check data structures and edit code as appropriately to fit your needs‚ùó

___

## Introduction to CGM analysis in diabetes clinical research

___

...in process...

___

## <a id="cleancgm"></a> cleanCGM


**Functionality:** **cleanCGM()** is a function written to clean CGM data for simpler file outputs for further analysis. Variable names are standardized, high and low limits (sensor type dependent) converted from text to values, gaps identified (but not imputed) and percentage wear/ sensor drop out metrics calculated. Option for calibration.  

___

‚ùó **Important   If you don't want to use this function and want to clean your own data, but want to use exercise_split or analyseCGM then ensure data is in the the correct format see example at the end of the cleanCGM section:** 
[Jump to cleanCGM output](#cleancgm-output)‚ùó 

- Function can take raw files from Dexcom, Libre or other (preprocessed data) from an input folder directory. Files can be of any format, csv is preferred.
‚ùó **Important:: Raw files should have patient ID within name _ID_optional.ext_ **‚ùó

- _cgmvariable_dictionary.xlsx_ included as part of this package is an editable dictionary used to rename variables of interest (example shown in table). This can be updated for variable names of other sensors. The output of the cleanCGM will give the final variable names should be **id**, **timestamp**, **sensorglucose**, (optional **recordtype** which is only required for calibration) defined as below. This part of the code works to standardize variables without much user input. Alternatively you can manually change your files to follow this variable standardization:  

**Table**: Definitions of the standardized variables

| Variable           | Definition                                                                       |
|--------------------|----------------------------------------------------------------------------------|
| id                 | Patient ID or sensor ID                                                          |
| timestamp          | Sensor glucose timestamp                                                         |
| sensorglucose      | Sensor glucose value                                                             |
| recordtype         | To identify if value is calibration or sensor (optional required for calibration)|

**Table**: Example of dictionary for renaming old variables in raw CGM data files, edit as required. "Type" column in this dictionary is only for user only for reference, sensor type is specified as an argument in the function.Ensure you enter the lifetime of the sensor used. Example is of some variable names I have come across in each of the sensors- Always check you data to see what the variable names are and edit this dictionary. If you have a mixed download of CGM of files, I recommend separating into folders by sensor type to avoid confusion before processing. 

| old_vars                        | new_vars      | type     | sensor_lifetime |
| ------------------------------- | ------------- | -------- | --------------- |
| Serial Number                   | id            | libre    | 14              |
| Device Timestamp                | timestamp     | libre    | 14              |
| Historic Glucose(mmol/L)        | sensorglucose | libre    | 14              |
| Record Type                     | scan_yn       | libre    | 14              |
| Scan Glucose(mmol/L)            | scanglucose   | libre    | 14              |
| Timestamp (YYYY-MM-DDThh:mm:ss) | timestamp     | dexcomg6 | 10              |
| Glucose Value (mmol/L)          | sensorglucose | dexcomg6 | 10              |
| Source Device ID                | device        | dexcomg6 | 10              |
| pt_id                           | id            | other    | 10              |
| device_dt_tm                    | timestamp     | other    | 10              |
| value                           | sensorglucose | other    | 10              |
| record_type                     | recordtype    | other    | 10              |

#### Calibration
- This is an optional argument which is sensor dependent. Also some JAEB studies have CGM that had calibration requirements. **This requires the device argument to be set to "other" or "dexcomg4" if you are know you are using an old type of dexcom**. 

**How it works:** 

1) SMBG calibrations are matched to the closest CGM sensor value and compares them by absolute relative difference. Multiple calibrations are usually performed per day so the mean absolute relative difference (MARD) 
per day is generated. 

2) A day of data should not be used if the MARD exceeds 20%. These days are excluded. A MARD>20% has be chosen as many things can impact the MARD (ie. sensor glucose can trail behind blood glucose in periods of exercise, or it can just be inherent sensitivity of the CGM device used) and this is probably the upper limit of MARD that we could expect from some old devices [more info](https://www.ncbi.nlm.nih.gov/pmc/articles/PMC7189145/). 

3) Days that don't have calibrations (and should have done) are also excluded, however many studies that used CGM have the requirement in their protocol and hence if a patient didn't calibrate or meet the requirement of number of calibrations per day then their data is usually excluded from study.  

Newer sensors don't require calibrations and have internal algorithms that keep the glucose values "calibrated". 

If your sensor requires calibration the easiest way to handle these are to preprocess the data like some example studies in JAEB are formatted ie. [Wireless Innovation for Seniors with Diabetes Mellitus (WISDM)](https://pubmed.ncbi.nlm.nih.gov/28126459/) like the example below. Calibrations work on having the calibration value identified in a record type variable. 

üë∑**Please Note** Preprocessed data structures may all be different, so this part may not work as expected for device types that are "other". Please review code and data structures and edit your code as necessary. üë∑

**Table**: Example head of data structures that have calibration values. All CGM and SMBG calibrations are put into the same column and identified by a recordtype variable. 

| id | timestamp           | recordtype  | sensorglucose |
| -- | ------------------- | ----------- | ------------- |
| 1  | 2000-06-30 14:49:36 | CGM         | 7.17          |
| 1  | 2000-06-30 14:54:36 | CGM         | 7.28          |
| 1  | 2000-06-30 14:59:36 | CGM         | 7.61          |
| 1  | 2000-06-30 15:04:36 | CGM         | 7.83          |
| 1  | 2000-06-30 15:09:36 | calibration | 7.9           |


#### <a id="cleancgm-output"></a> cleanCGM output

The function will output: 

  1) **Cleaned CGM files** of the structure:

| id | date       | timestamp           | sensorglucose |
| -- | ---------- | ------------------- | ------------- |
| 1  | 2000-06-30 | 2000-06-30 14:49:36 | 7.17          |
| 1  | 2000-06-30 | 2000-06-30 14:54:36 | 7.28          |
| 1  | 2000-06-30 | 2000-06-30 14:59:36 | 7.61          |
| 1  | 2000-06-30 | 2000-06-30 15:04:36 | 7.83          |

  2) **gap_info.xlsx** Which provides information on the gaps in the data. It contains the timestamp and length of gap (diff) per ID:

| timestamp           | diff | subject_id  |
| ------------------- | ---- | ----------- |
| 2023-05-19 06:12:00 | \-45 | MU-1-004_V1 |
| 2023-06-14 03:37:00 | \-30 | MU-1-008_V1 |
| 2023-07-28 00:33:00 | \-30 | MU-1-014_V1 |
| 2023-07-26 23:07:00 | \-30 | MU-1-016_V1 |
| 2023-08-01 09:07:00 | \-30 | MU-1-016_V1 |
| 2023-08-03 01:10:00 | \-30 | MU-1-019_V1 |

  3) **percentage_data_collected_info.xlsx** Which provides information about the quality of the CGM data:

- _percentage_expectedwear_overstudy_ -percentage wear that was expected over the study (usually expected lifetime of the sensor if it is a 10 day wear (dexcom) or 14 day wear (libre), but some studies might only require 3 days of wear, you can specify this in the function arguments). It evaluates the length of time from the maximum to minimum timestamp.

- _percentage_datacollected_overstudy_ -percentage of actual data collected. This tells us if there was drop out from the sensor, counting the amount of time that the CGM actually measured.

- _percentage_dropout_overstudy_ -percentage of time that was lost to drop out (inverse of the above)

| subject_id  | percentage_expectedwear_overstudy | percentage_datacollected_overstudy | percentage_dropout_overstudy |
| ----------- | --------------------------------- | ---------------------------------- | ---------------------------- |
| MU-1-001_V1 | 98.2142857                        | 100                                | 0                            |
| MU-1-003_V1 | 99.4047619                        | 100                                | 0                            |
| MU-1-004_V1 | 56.25                             | 95.3125                            | 4.6875                       |
| MU-1-005_V1 | 64.8809524                        | 100                                | 0                            |
| MU-1-008_V1 | 74.4047619                        | 96.875                             | 3.125                        |

___


___

## <a id="exercise_split"></a> exercise_split

**Functionality:** **exercise_split()** is a function written to split up a CGM file (cleaned by cleanCGM or another way) into relevant time periods post exercise. Exercise splitting is based on an exercisefile- a list of exercise timestamps for every person in study [Jump to exercisefile - List of exercise time stamps ](#exercisefile-listofexercisetimestamps) for the structure of this. Function takes files in the same structure as outputted from cleanCGM() [Jump to cleanCGM output](#cleancgm-output). These split files can then be individually ran through analyseCGM() [Jump to analyseCGM](#analysecgm) or taken for further analysis.  

___

In the diabetes exercise literature it is usual to assess:

- 6 hours post exercise (In this function you can alter the 6 hours to be any number of hours)

- Overnight post exercise (00:00-06:00)

- 24 hours post exercise

- The time from exercise end up until 00:00 

- The next day post exercise (06:00-24:00 ie. midnight of that next day)
              
![Example of relevant time periods post exercise](man/figures/exercise_periods.png)

#### <a id="exercisefile-listofexercisetimestamps"></a> exercisefile - List of exercise time stamps 
- File required for exercise splitting, listing the start and end time of each exercise. Type column can be changed to whatever type of exercise/event/instance etc. it is. 

It should be structured as below: 

| pt_id | type | startdatetime      | finishdatetime      |
| ----- | ---- | ------------------ | ------------------- |
| FRC1  | 1    | 2022-01-28 8:19:28 | 2022-01-28 9:34:28  |
| FRC1  | 2    | 2022-03-15 8:40:48 | 2022-03-15 9:50:48  |
| FRC2  | 1    | 2022-03-10 7:17:44 | 2022-03-10 8:32:44  |
| FRC2  | 2    | 2022-04-07 7:17:43 | 2022-04-07 8:27:43  |

#### <a id="exercise_splitoutput"></a> exercise_split output

- Folders holding each timeperiod split are created automatically in your _outputdirectory_ as below:
![Exercise files](man/figures/exercisefiles.png)

-The files in this folder are named automatically corresponding to the timeperiod they are in eg. files in **data-after_24**  are named as: _ID_exercisetype_24.csv_, for  **data-after_0000_0600** are named as: _ID_exercisetype_00_06.csv_ etc. 

‚ùó **Important:**  File naming structure is required for the analyseCGM() function. Creating a unique file for each individual for each time period allows us to get a global table of CGM metrics for each of these timeperiods which is easier to then taken on for further analysis.‚ùó 

- For ease the folder data-all are all the files in one folder. You can then point ot this one folder when you run analyseCGM(). 

These files are structured slightly differently to the cleanCGM output with the addition of the variables:

- **type**: relating to the type of exercise/event/instance of exercise etc	which is specified in the exercisefile
                    
- **start_split**: Sensor glucose timestamp where the split began ie. the closedst within the CGM interval that matched the start of exercise	
                    
- **startdatetime**: Exercise start timestamp from exercise file

- **finishdatetime**: Exercise end timestamp from exercise file	

- **diff**: The raw time difference between the sesnsor glucose timestamp **exercise end timestamp**. If negative this is **during** exercise.	

- **diff_disc**: The discrete time interval created from the diff variable. During exercise is set to 0 and follows consecutively ie. time within the first hour after exercise is set to 1, second hour is 2 etc. 
                    
‚ùó **Important:** analyseCGM() when exercise=T relies on the **diff_disc** variable to create the time in range during exercise and post exercise metrics.‚ùó                     


| timestamp       | sensorglucose | pt_id | type | start_split     | startdatetime   | finishdatetime  | diff        | diff_disc |
| ------------------- | ----------------- | --------- | -------- | ------------------- | ------------------- | ------------------- | ---------------- | ------------- |
| 2022-03-16 00:00:49 | 4.3               | FRC1      | cooldown | 2022-03-15 09:50:48 | 2022-03-15 08:40:48 | 2022-03-15 09:50:48 | 14.1669444444444 | 15            |
| 2022-03-16 00:05:49 | 4.3               | FRC1      | cooldown | 2022-03-15 09:50:48 | 2022-03-15 08:40:48 | 2022-03-15 09:50:48 | 14.2502777777778 | 15            |
| 2022-03-16 00:10:49 | 4.7               | FRC1      | cooldown | 2022-03-15 09:50:48 | 2022-03-15 08:40:48 | 2022-03-15 09:50:48 | 14.3336111111111 | 15            |
| 2022-03-16 00:15:49 | 5                 | FRC1      | cooldown | 2022-03-15 09:50:48 | 2022-03-15 08:40:48 | 2022-03-15 09:50:48 | 14.4169444444444 | 15            |

___

## <a id="analysecgm"></a> analyseCGM

___

**Functionality:** **analyseCGM()** is a function written to create consensus glycemic metrics based off definitions outlined International Consensus on Use of Continuous Glucose Monitoring:[Danne 2017](https://care.diabetesjournals.org/content/40/12/1631). For definitions [Jump to analyseCGM output](#analysecgm-output). Function takes files in the same structure as outputted from cleanCGM() or exercise_split(). 

___

- For calculation of time spent variables data is checked to be consecutive. If timestamps are >20 min apart a missing row is added to the table to prevent events from running on if the time gap is >20 min.

- General time spent variables are created for: 
  - Above 10, 13.9, 16
  - Below 3 
  - Range 3-<3.9, 3.9-10
  
  
- In addition to this hypo/hyperglycemia also have defined "excursions":
  - Hyperglycemia (at levels >10 and >13.9 and 16)
  - Hypoglycemia (clinical excursion event beginning when <3 for 15min and ending when ‚â•3.9 for 15min) 

The start of an excursion is when glucose goes above/below the specified value for 15 mins. If this doesn't happen it is not defined as an excursion and isn't included in the _excursion time spent variables_. The _general time spent variables_ will include any time above/below the level regardless of if this is >15min. 

üñãÔ∏è **NOTE** it is my recommendation that the _general time spent variables_ are sufficient and the defined excursions or "clinical excursion" hypoglcemia are too stringent. You may miss important information if you just assess events that had to last >15min. This is particularly relevant if you use the Libre 1, 2 or Libre pro as this CGM measures glucose every 15min. Using time above/below as your measures of hypo/hyperglycemia would give you a good indication of the lived experience of a patient and this, in my opinion, is most important. Excursion metrics are still required by the International Consensus on Use of Continuous Glucose Monitoring and hence why this function still generates them üñã


#### Hypoglycemia (clinical excursion event beginning <3 for 15min and ending when >3.9 for 15min)

**Beginning of a CGM event**: readings below 3 mmol/l for 15 min defines a clinically significant hypoglycemic event. Code checks if 4 consecutive rows are below 3 (4 rows in total: row 1 detected below 3mmol/l the next 3 rows = a time of 15 mins as 1 row is assumed as a 5 min reading). If this is the case then the first instance of dropping below 3 is marked as the start row of the clinical hypoglycemia CGM event.

**End of a CGM event**: readings for 15 min at ‚â• 3.9 mmol/l. From the start row of the true hypoglycemic event defined above the code checks if the glucose in consecutive rows is ‚â• 3.9 mmol/l and marks these values as hypoglycemia. At the row glucose becomes ‚â• 3.9 the code checks if the next 3 rows remain ‚â• 3.9 mmol/l (4 rows in total: row 1 detected ‚â• 3.9 mmol/l the next 3 rows = a time of 15 mins as 1 row is assumed as a 5 min reading). If glucose dips below 3.9 again within these 4 rows then the event does not end. If the glucose stays ‚â• 3.9 for these 4 rows the event ends at the first instance of ‚â•3.9. 

If a missing row is present (inserted because the consecutive timestamps had a gap >20 min) the hypoglycemic event has to end at this point).
üñãÔ∏è

#### Freestyle libre in the analyseCGM() function 
- If the data you have are from a Libre (or any sensor that has 15min sampled data) then ensure your argument libre set to TRUE in the analyseCGM() function 

- The analyseCGM() function has a section that pseudo codes thing kind of data to be "5min" data ie. Every row is repeated 2 more times (3 lots of 5 mins are in 15 mins). It doesn't matter that the timestamps aren't increasing in 5min but having the number of row corresponding to 5 min data is the important part, mainly for the clinical hypo excursion definition. Code section as below:

```r
  table <- slice(table, rep(1:n(), each = 3))
```

#### <a id="analysecgm-output"></a> analyseCGM output

1) A .csv file called by default _CGMupload_ containing CGM variables per each individual (file) on each row 

All CGM variables generated by analyseCGM() are detailed below: 

| Output variable                | Description                                                                                                                                                                                                                                                                                                                                       |
|--------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| subject_id                     | Patient ID taken from raw data filename- may require further string processing                                                                                                                                                                                                                                                                    |
| exercise                       | Only created when exercise=T. See section on exercise analysis for more info                                                                                                                                                                                                                                                                      |
| totaltime_mins                 | Total time in the table, this is calculated from the number of rows present, assuming each row is 5 min reading NOT max and min as this would not be accurate if there were gaps in the data                                                                                                                                                      |
| start_cgm_analysis             | min datetime in table                                                                                                                                                                                                                                                                                                                             |
| end_cgm_analysis               | max datetime in table                                                                                                                                                                                                                                                                                                                             |
| interval                       | Most common interval in the data, for dexcom this is 300 seconds (5min) for libre this is put to 900 seconds (15 min)                                                                                                                                                                                                                             |
| num_days_good_data             | Total time / (24\*60\*60))                                                                                                                                                                                                                                                                                                                        |
| num_hrs_good_data              | Total time / 3600                                                                                                                                                                                                                                                                                                                                 |
| total_sensor_readings          | Total number of rows in the table                                                                                                                                                                                                                                                                                                                 |
| average_sensor                 | Average sensor glucose                                                                                                                                                                                                                                                                                                                            |
| estimated_a1c%                 | Estimated Hba1C in % based on hba1c equation and mean glucose                                                                                                                                                                                                                                                                                     |
| estimated_a1cmmolmol           | Estimated Hba1C in mmol/mol based on hba1c equation and mean glucose                                                                                                                                                                                                                                                                              |
| gmimmol/mol                    | Glucose Management Indicator inndicates the average Hba1C level that would be expected based on mean.  gmi and estimated Hba1C should therefore be similar                                                                                                                                                                                        |
| q1_sensor                      | Lower quartile sensor glucose                                                                                                                                                                                                                                                                                                                     |
| median_sensor                  | Median sensor glucose                                                                                                                                                                                                                                                                                                                             |
| q3_sensor                      | upper quartile sensor glucose                                                                                                                                                                                                                                                                                                                     |
| standard_deviation             | Standard deviation of sensor glucose                                                                                                                                                                                                                                                                                                              |
| cv                             | Coefficient of variation. NOTE: SD is highly influenced by the mean glucose ‚Äì someone with a higher mean glucose will have a higher SD. The CV divides the SD/mean x100. This division helps ‚Äúcorrect‚Äù and normalize glucose variability, allowing us to set a single variability goal that applies to people with different mean glucose levels. |
| min_sensor                     | Minimum sensor glucose                                                                                                                                                                                                                                                                                                                            |
| max_sensor                     | Maximum sensor glucose                                                                                                                                                                                                                                                                                                                            |
| excursions_over_10             | Count of number of times glucose went above 10 mmol/l for 15 mins (excursion start defined as above  threshold fpr 15 mins)                                                                                                                                                                                                                       |
| min_spent_excursion_over_10    | Time in mins spent in excursions above 10 mmol/l (excursion start defined as above threshold fpr 15 mins)                                                                                                                                                                                                                                         |
| percent_time_excursion_over_10 | Percentage of time spent in excursions above 10 mmol/l in relation to total time of the sensor calculated previously   (excursion defined as above  threshold fpr 15 mins)                                                                                                                                                                        |
| excursions_over_13             | Count of number of times glucose went above 13.9 mmol/l for 15 mins (excursion start defined as above  threshold fpr 15 mins)                                                                                                                                                                                                                     |
| min_spent_excursion_over_13    | Time in mins spent in excursions above 13.9 mmol/l (excursion start defined as above threshold fpr 15 mins)                                                                                                                                                                                                                                       |
| percent_time_excursion_over_13 | Percentage of time spent in excursions above 13.9 mmol/l in relation to total time of the sensor calculated previously   (excursion defined as above  threshold fpr 15 mins)                                                                                                                                                                      |
| excursions_over_16             | Count of number of times glucose went above 16 mmol/l for 15 mins (excursion start defined as above  threshold fpr 15 mins)                                                                                                                                                                                                                       |
| min_spent_excursion_over_16    | Time in mins spent in excursions above 16 mmol/l (excursion start defined as above threshold fpr 15 mins)                                                                                                                                                                                                                                         |
| percent_time_excursion_over_16 | Percentage of time spent in excursions above 16 mmol/l in relation to total time of the sensor calculated previously  (excursion defined as above  threshold fpr 15 mins)                                                                                                                                                                         |
| hypo_under_3_prolonged         | Count of number of times hypoglycemic episode (as defined see below) was > 2 hours                                                                                                                                                                                                                                                                |
| hypo_under_3                   | Count of number of hypoglycemic episodes. Clinically significant hypoglycemic event excursion begins as readings below 3 mmol/l for 15 min, ending when readings for 15 min at ‚â• 3.9 mmol/l. See below NOTE for more information.                                                                                                                 |
| min_spent_under_hypo3          | Time in mins spent in hypoglycemia episode                                                                                                                                                                                                                                                                                                        |
| percent_time_under_hypo3       | Percentage of time spent in hypoglycemic episodes in relation to total time of the sensor calculated previously                                                                                                                                                                                                                                   |
| min_spent_<3                   | Time in mins spent below 3 mmol/l                                                                                                                                                                                                                                                                                                                 |
| percent_time_<3                | Percentage of time spent below 3 mmol/l in relation in relation to total time of the sensor calculated previously                                                                                                                                                                                                                                 |
| min_spent_3_3.8                | Time in mins spent between  3-3.9 mmol/l                                                                                                                                                                                                                                                                                                          |
| percent_time_3_3.8             | Percentage of time spent between 3-3.9 mmol/l in relation in relation to total time of the sensor calculated previously                                                                                                                                                                                                                           |
| min_spent_3.9_10               | Time in mins spent between  3.9-10 mmol/l                                                                                                                                                                                                                                                                                                         |
| percent_time_3.9_10            | Percentage of time spent between 3.9-10 mmol/l in relation in relation to total time of the sensor calculated previously                                                                                                                                                                                                                          |
| min_spent_3.9_7.8              | Time in mins spent between  3.9-7.8 mmol/l                                                                                                                                                                                                                                                                                                        |
| percent_time_3.9_7.8           | Percentage of time spent between 3.9-7.8 mmol/l in relation in relation to total time of the sensor calculated previously                                                                                                                                                                                                                         |
| min_spent_over10               | Time in mins spent above 10 mmol/l                                                                                                                                                                                                                                                                                                                |
| percent_time_over10            | Percentage of time spent above 10 mmol/l in relation in relation to total time of the sensor calculated previously                                                                                                                                                                                                                                |
| min_spent_over13               | Time in mins spent above 13.9 mmol/l                                                                                                                                                                                                                                                                                                              |
| percent_time_over13            | Percentage of time spent above 13.9  mmol/l in relation in relation to total time of the sensor calculated previously                                                                                                                                                                                                                             |
| total_auc                      | Total area under the glucose curve                                                                                                                                                                                                                                                                                                                |
| r_mage                         | Mean Amplitude Glycemic Excursion. Option to asses average of the differences greater than either  entire dataset SD, 2SD, etc                                                                                                                                                                                                                    |
| j_index                        | Combination of information from mean and SD of all glucose values doi: 10.1055/s-2007-979906.                                                                                                                                                                                                                                                     |
| conga_1                        | Continuous overlapping net glycemic action, with _n appended as the indicated number of hours being assessed (in this case 1 hour)                                                                                                                                                                                                                |
| modd                           | Mean of daily difference                                                                                                                                                                                                                                                                                                                          |
| lbgi                           | Low Blood Glucose Index, equation is for glucose in mmol/l (dc1386 appendix)                                                                                                                                                                                                                                                                      |
| hbgi                           | High Blood Glucose Index, equation is for glucose in mmol/l (dc1386 appendix)                                                                                                                                                                                                                                                                     |
| min_spent_7_15_exercise        | Only created when exercise=T. Time in mins spent between 7-15 mmol/l during exercise (Ridell 2017).                                                                                                                                                                                                                                               |
| percent_time_7_15_exercise     | Only created when exercise=T. Percentage of time in mins spent between 7-15 mmol/l during exercise (Ridell 2017).                                                                                                                                                                                                                                 |
| min_spent_5_12_exercise        | Only created when exercise=T. Time in mins spent between 5-12 mmol/l in the time up to 6 hours post exercise (Ridell 2017).                                                                                                                                                                                                                       |
| percent_time_5_12_exercise     | Only created when exercise=T. Percentage of time in mins spent between 5-12 mmol/l in the time up to 6 hours post exercise (Ridell 2017).                                                                                                                                                                                                         |

                                                                 
#### <a id="exercise"></a> Exercise
Set argument exercise is set to TRUE. Analysis of exercise data is usually done for time periods post exercise. If you are using this function on exercise data, structured as periods of CGM data that are a certain time post exercise, ensure your files are structured as outputted from the exercise_split() function [Jump to exercise_split](#exercise_split)

- Additional CGM metrics are created for exercise and are defined in the above section [Jump to analyseCGM output](#analysecgm-output)
- _min_spent_7_15_exercise_

- _percent_time_7_15_exercise_

- _min_spent_5_12_exercise_

- _percent_time_5_12_exercise_

___


